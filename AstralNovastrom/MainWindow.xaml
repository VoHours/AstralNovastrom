<Window x:Class="AstralNovastrom.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:converters="clr-namespace:AstralNovastrom.Converters"
        xmlns:controls="clr-namespace:AstralNovastrom.Controls"
        mc:Ignorable="d"
        Title="FROST-SHADOW NEXUS v5.0.7" 
        Height="1000" Width="1800"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

    <Window.Resources>
        <!-- Material Design 3 科幻配色 -->
        <SolidColorBrush x:Key="PrimaryContainer" Color="#FF0A1E2D"/>
        <SolidColorBrush x:Key="OnPrimaryContainer" Color="#FFA0F0FF"/>
        <SolidColorBrush x:Key="SecondaryContainer" Color="#FF1A0A2D"/>
        <SolidColorBrush x:Key="OnSecondaryContainer" Color="#FFE6A0FF"/>
        <SolidColorBrush x:Key="TertiaryContainer" Color="#FF002D1A"/>
        <SolidColorBrush x:Key="OnTertiaryContainer" Color="#FF88FFC8"/>
        <SolidColorBrush x:Key="ErrorContainer" Color="#FF2D0A0A"/>
        <SolidColorBrush x:Key="OnErrorContainer" Color="#FFFF8888"/>
        <SolidColorBrush x:Key="Surface" Color="#FF0A0A14"/>
        <SolidColorBrush x:Key="SurfaceVariant" Color="#FF1A1A28"/>
        <SolidColorBrush x:Key="OnSurface" Color="#FFE0E0FF"/>
        <SolidColorBrush x:Key="Outline" Color="#FF3A3A5A"/>
        <SolidColorBrush x:Key="OutlineVariant" Color="#FF2A2A44"/>

        <!-- 动态渐变 -->
        <LinearGradientBrush x:Key="QuantumGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#FF00C6FF" Offset="0"/>
            <GradientStop Color="#FF9D00FF" Offset="0.5"/>
            <GradientStop Color="#FF00FFAA" Offset="1"/>
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="HoloGradient" StartPoint="0,0" EndPoint="1,0">
            <GradientStop Color="#2000C6FF" Offset="0"/>
            <GradientStop Color="#409D00FF" Offset="0.5"/>
            <GradientStop Color="#2000C6FF" Offset="1"/>
        </LinearGradientBrush>

        <!-- Material 3 形状 -->
        <CornerRadius x:Key="ExtraSmall">4</CornerRadius>
        <CornerRadius x:Key="Small">8</CornerRadius>
        <CornerRadius x:Key="Medium">12</CornerRadius>
        <CornerRadius x:Key="Large">16</CornerRadius>
        <CornerRadius x:Key="ExtraLarge">24</CornerRadius>
        <CornerRadius x:Key="Full">9999</CornerRadius>

        <!-- 字体 -->
        <FontFamily x:Key="DisplayFont">#JetBrains Mono, Consolas, Cascadia Code</FontFamily>
        <FontFamily x:Key="BodyFont">#Segoe UI Variable, Segoe UI</FontFamily>

        <!-- 材质阴影 -->
        <DropShadowEffect x:Key="Elevation1" Color="#40000000" BlurRadius="8" ShadowDepth="1"/>
        <DropShadowEffect x:Key="Elevation2" Color="#60000000" BlurRadius="16" ShadowDepth="2"/>
        <DropShadowEffect x:Key="Elevation3" Color="#80000000" BlurRadius="24" ShadowDepth="4"/>
        <DropShadowEffect x:Key="GlowEffect" Color="#8000C6FF" BlurRadius="20" ShadowDepth="0" Opacity="0.8"/>
        <DropShadowEffect x:Key="WarningGlow" Color="#80FFAA00" BlurRadius="15" ShadowDepth="0"/>
        <DropShadowEffect x:Key="CriticalGlow" Color="#80FF5555" BlurRadius="25" ShadowDepth="0"/>

        <!-- 动画资源 -->
        <Storyboard x:Key="PulseAnimation" RepeatBehavior="Forever">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0.3"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1" Value="0.8"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2" Value="0.3"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <Storyboard x:Key="WarningPulse" RepeatBehavior="Forever">
            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)">
                <EasingColorKeyFrame KeyTime="0:0:0" Value="#30FFAA00"/>
                <EasingColorKeyFrame KeyTime="0:0:0.5" Value="#80FFAA00"/>
                <EasingColorKeyFrame KeyTime="0:0:1" Value="#30FFAA00"/>
            </ColorAnimationUsingKeyFrames>
        </Storyboard>

        <!-- Material 3 卡片样式 -->
        <Style x:Key="MaterialCard" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource SurfaceVariant}"/>
            <Setter Property="CornerRadius" Value="{StaticResource Large}"/>
            <Setter Property="BorderBrush" Value="{StaticResource Outline}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Effect" Value="{StaticResource Elevation1}"/>
        </Style>

        <Style x:Key="ElevatedCard" TargetType="Border" BasedOn="{StaticResource MaterialCard}">
            <Setter Property="Background" Value="{StaticResource PrimaryContainer}"/>
            <Setter Property="BorderBrush" Value="{StaticResource OnPrimaryContainer}"/>
            <Setter Property="Effect" Value="{StaticResource Elevation2}"/>
        </Style>

        <!-- 状态指示灯 -->
        <Style x:Key="StatusIndicator" TargetType="Ellipse">
            <Setter Property="Width" Value="12"/>
            <Setter Property="Height" Value="12"/>
            <Setter Property="Stroke" Value="{StaticResource Outline}"/>
            <Setter Property="StrokeThickness" Value="1"/>
        </Style>

        <Style x:Key="StatusOnline" TargetType="Ellipse" BasedOn="{StaticResource StatusIndicator}">
            <Setter Property="Fill" Value="#FF00FF88"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#8000FF88" BlurRadius="10"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="StatusWarning" TargetType="Ellipse" BasedOn="{StaticResource StatusIndicator}">
            <Setter Property="Fill" Value="#FFFFAA00"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#80FFAA00" BlurRadius="10"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Material 3 按钮 -->
        <Style x:Key="FilledButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryContainer}"/>
            <Setter Property="Foreground" Value="{StaticResource OnPrimaryContainer}"/>
            <Setter Property="BorderBrush" Value="{StaticResource OnPrimaryContainer}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="{StaticResource Full}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#3AFFFFFF"/>
                                <Setter Property="Effect" Value="{StaticResource GlowEffect}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#6AFFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="OutlinedButton" TargetType="Button">
            <Setter Property="Foreground" Value="{StaticResource OnSurface}"/>
            <Setter Property="BorderBrush" Value="{StaticResource Outline}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              TextElement.Foreground="{TemplateBinding Foreground}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#2000C6FF"/>
                                <Setter Property="BorderBrush" Value="{StaticResource OnPrimaryContainer}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#4000C6FF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 滑块样式 -->
        <Style x:Key="MaterialSlider" TargetType="Slider">
            <Setter Property="Background" Value="{StaticResource SurfaceVariant}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="4"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <Border x:Name="TrackBackground" 
                                    Background="{TemplateBinding Background}"
                                    Height="{TemplateBinding Height}"
                                    CornerRadius="2"/>
                            <Border x:Name="TrackValue" 
                                    Background="{StaticResource QuantumGradient}"
                                    Height="{TemplateBinding Height}"
                                    Width="{TemplateBinding Width}"
                                    CornerRadius="2"
                                    HorizontalAlignment="Left"/>
                            <Thumb x:Name="SliderThumb" 
                                   Background="{StaticResource OnPrimaryContainer}"
                                   Width="20" Height="20"
                                   VerticalAlignment="Center">
                                <Thumb.Effect>
                                    <DropShadowEffect Color="#8000C6FF" BlurRadius="8"/>
                                </Thumb.Effect>
                            </Thumb>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 进度条样式 -->
        <Style x:Key="QuantumProgressBar" TargetType="ProgressBar">
            <Setter Property="Background" Value="{StaticResource SurfaceVariant}"/>
            <Setter Property="Foreground" Value="{StaticResource QuantumGradient}"/>
            <Setter Property="Height" Value="12"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ProgressBar">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="{StaticResource Full}">
                            <Grid>
                                <Border x:Name="PART_Track" 
                                        CornerRadius="{StaticResource Full}"
                                        Background="{TemplateBinding Background}"/>
                                <Border x:Name="PART_Indicator" 
                                        CornerRadius="{StaticResource Full}"
                                        Background="{TemplateBinding Foreground}"
                                        HorizontalAlignment="Left">
                                    <Border.Effect>
                                        <BlurEffect Radius="4"/>
                                    </Border.Effect>
                                </Border>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- 标签样式 -->
        <Style x:Key="Chip" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource Surface}"/>
            <Setter Property="CornerRadius" Value="{StaticResource Full}"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="BorderBrush" Value="{StaticResource Outline}"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <!-- 数值显示 -->
        <Style x:Key="ValueDisplay" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource DisplayFont}"/>
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{StaticResource OnPrimaryContainer}"/>
        </Style>

        <Style x:Key="ValueLabel" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#AAAAAA"/>
            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
        </Style>

        <!-- 数据卡片 -->
        <Style x:Key="DataCard" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource Surface}"/>
            <Setter Property="CornerRadius" Value="{StaticResource Medium}"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="BorderBrush" Value="{StaticResource Outline}"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

    </Window.Resources>

    <!-- 背景层 -->
    <Grid>
        <!-- 科幻背景 -->
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#FF0A0A14" Offset="0"/>
                <GradientStop Color="#FF0A0A1A" Offset="0.5"/>
                <GradientStop Color="#FF140A1A" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <!-- 背景网格 -->
        <Canvas>
            <Rectangle Width="2000" Height="2000" Opacity="0.05">
                <Rectangle.Fill>
                    <DrawingBrush TileMode="Tile" Viewport="0,0,50,50" ViewportUnits="Absolute">
                        <DrawingBrush.Drawing>
                            <GeometryDrawing Brush="#4000C6FF">
                                <GeometryDrawing.Geometry>
                                    <RectangleGeometry Rect="0,0,50,50"/>
                                </GeometryDrawing.Geometry>
                                <GeometryDrawing.Pen>
                                    <Pen Brush="#2000C6FF" Thickness="1"/>
                                </GeometryDrawing.Pen>
                            </GeometryDrawing>
                        </DrawingBrush.Drawing>
                    </DrawingBrush>
                </Rectangle.Fill>
            </Rectangle>
        </Canvas>

        <!-- 主容器 -->
        <Border Margin="20" CornerRadius="{StaticResource ExtraLarge}" 
                Background="{StaticResource Surface}" 
                BorderBrush="{StaticResource Outline}" 
                BorderThickness="1"
                Effect="{StaticResource Elevation3}">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 顶部应用栏 -->
                <controls:TopAppBarControl Grid.Row="0"/>

                <!-- 主内容 -->
                <Grid Grid.Row="1" Margin="24">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>

                    <!-- 左侧：可视化与配置 -->
                    <Grid Grid.Column="0" Margin="0,0,12,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="2*"/>
                            <RowDefinition Height="1*"/>
                        </Grid.RowDefinitions>

                        <!-- 量子波形可视化 -->
                        <controls:QuantumWaveformControl Grid.Row="0" 
                                                        Margin="0,0,0,12"/>

                        <!-- 配置面板 -->
                        <controls:ConfigurationPanelControl Grid.Row="1"/>
                    </Grid>

                    <!-- 右侧：监控与日志 -->
                    <Grid Grid.Column="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="1*"/>
                            <RowDefinition Height="2*"/>
                        </Grid.RowDefinitions>

                        <!-- 系统监控 -->
                        <controls:SystemMonitoringControl Grid.Row="0" 
                                                         Margin="0,0,0,12"/>

                        <!-- 系统日志 -->
                        <controls:SystemLogControl Grid.Row="1"/>
                    </Grid>
                </Grid>

                <!-- 底部状态栏 -->
                <controls:BottomStatusBarControl Grid.Row="2"/>
            </Grid>
        </Border>

        <!-- 浮动配置窗口 -->
        <controls:FloatingConfigControl x:Name="FloatingConfigWindow" 
                                        Panel.ZIndex="1000" 
                                        Visibility="Collapsed"/>
    </Grid>
</Window>
